<%- include('partials/admin-header', { title: 't.adminOrders.title', page: 'orders' }) %>

            <div class="filter-tabs">
                <button class="filter-btn active"><%= t.adminOrders.filterAll %></button>
                <button class="filter-btn"><%= t.adminDashboard.pending %></button>
                <button class="filter-btn"><%= t.adminDashboard.approved %></button>
                <button class="filter-btn"><%= t.adminDashboard.cancelled %></button>
         
            </div>

            <section class="card">
                <table>
                    <thead>
                        <tr>
                        
                            <th><%= t.userRequest.medName %></th>
                            <th><%= t.common.pharmacy %></th>
                            <th><%= t.common.items %></th>
                            <th><%= t.common.totalAmount %></th>
          
                            <th><%= t.common.date %></th>
                            <th><%= t.common.status %></th>
                            <th><%= t.common.actions %></th>
                        </tr>
  
                   </thead>
                    <tbody>
                        <% if (orders && orders.length > 0) { %>
                            <% orders.forEach(order => { %>
                            <tr>
                                <td><strong><%= order.medicineId ? order.medicineId.name : t.adminOrders.deletedMedicine %></strong></td>
                                
                                <td><%= order.user?.name || t.adminOrders.unknownUser %></td>
                                
                                <td><%= order.quantity %> <%= t.common.items %></td>
                                
 
                                <td>$<%= order.price ? order.totalPrice : '0.00' %></td>

                                <% const orderDate = new Date(order.createdAt).toLocaleDateString('en-US') %>
                                
                           
                                <td><%= orderDate %></td>
                                
                                <td><span class="badge <%= order.status.toLowerCase() %>"><%= order.status %></span></td>
                       
                                         
                                <td>
                                    <% if(order.status === 'Pending' || order.status === 'pending') { %>
              
                                        <div class="actions" id="actions-<%= order._id %>">
                                            <button class="btn-icon approve status-btn" 
                      
                                                    title="<%= t.adminDashboard.approved %>" 
                                                    data-id="<%= order._id %>" 
              
                                                    data-status="approved">
                                                <i class="ph ph-check"></i>
            
                                            </button>
                                            
                        
                                            <button class="btn-icon cancel status-btn" 
                                                    title="<%= t.common.cancel %>" 
                       
                                                    data-id="<%= order._id %>" 
                                                    data-status="cancelled">
                
                                                <i class="ph ph-x"></i>
                                            </button>
                      
                                        </div>
                                    <% } else { %>
                                        <button class="btn-text"><%= t.common.viewDetails %></button>
                                    <% } %>
                                </td>
                            </tr>
  
                            <% }) %>
                        <% } else { %>
                            <tr><td colspan="7"><%= t.adminOrders.noOrders %></td></tr>
             
                        <% } %>
                    </tbody>
                </table>
            </section>
        <%- include('partials/admin-footer', { page: 'orders' }) %>